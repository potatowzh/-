![图层 1](软件需求规格说明书.assets/图层 1.png)

# 			 	331智能养老院-需求规格说明书

[TOC]

## 一、引言

### 1.1 定位与目标

​		随着中国经济社会的发展，一方面，人口老龄化问题越来越严重，老年人的比例增加；另一方面，子女由于工作、生活等原因，不得不前往外地，导致社会中出现了很多的空巢老人，进而老人的安全就成为了一个棘手问题，传统的家庭养老模式已无法适应社会的快速发展，对此，基于情感分析的智慧养老系统应运而生。

​		基于情感分析的智慧养老系统是一个人工智能项目。通过摄像头实时拍摄到的画面，人工智能算法实时分析老人的情感、分析是否有人摔倒、分析是否有人闯入禁止区域、分析老人是否有和义工互动并追踪义工、分析是否有陌生人出现并追踪陌生人。一旦上述事件发生，该事件会立即插入到数据库中。这些事件数据被实时地更新在报表中，管理人员因此可以迅速做出反应。与传统家庭养老相比，智慧养老系统打破了家庭养老时间和空间的限制，使得管理起来更加方便，可以让子女更加放心。同时，由于其技术的创新型，符合老龄化的社会现实，可以吸引更多人才投入该领域，让更多的思维得到碰撞，提升情感分析技术的交互发展，进而有效地提升基于情感分析的智慧养老系统的可用性。 



### 1.2 系统用户需求

**本系统的用户仅为“管理员”，老人、工作人员和义工无权接触此系统** 

- 系统管理员可以登录系统、维护信息和修改密码
- 系统管理员可以完成老人、工作人员和义工信息的录入、修改、查询、删除、头像的设定和统计分析
- 系统管理员可以实时得到报警，如陌生人入侵、陌生人追踪等



### **1.3 使用场景**

**该系统运行在Linux环境下，应配备5个摄像头**：

- 1个摄像头放在电脑前，用于手机人脸数据
- 1个摄像头挂在房间的墙上，检测是否有陌生人出现和检测哪位老人笑了，有陌生人或老人笑了便立即记录，并且追踪陌生人
- 1个摄像头挂在走廊墙上，检测是否有人摔倒，有人摔倒便立即记录
- 1个摄像头放在院子里，监控是否有人闯入禁止区域，有闯入便立即记录
- 1个摄像头放在桌子上，当有义工访问才拿出来使用，用于监控义工和老人的交互，有交互便立即记录。**记录**有2层含义，1个是将截图保存起来，另一个是将事件插入到数据库中。与此同时，摄像头的画面实时的显示在页面上，并录像保存到硬盘中。



### **1.4 整体架构**

**从技术架构划分，本系统分为2部分**

- Web端，其主要作用是
  - 1）维护和统计老人、工作人员和义工的信息
  - 2）收集他们的脸部数据（计算机视觉部分使用脸部数据训练人脸识别模型实现精准监控）
  - 3）通过实时报表实时展现报警信息
- 计算机视觉，其主要作用是
  - 1）收集人脸数据
  - 2）陌生人识别和追踪
  - 3）老人情感分析
  - 4）摔倒检测
  - 5）禁止区域入侵检测
  - 6）义工和老人交互检测
  - 7）摄像头画面实时显示和录像



### 1.5 参考资料

1、张海藩 《软件工程导论》        清华大学出版社

2、侯爱民 《面向对象分析与设计（UML）》  清华大学出版社

3、王珊  《数据库系统概论》      高等教育出版社



## **二、需求概述**

### **2.1 项目背景**

将要开发的软件名为《331智能养老系统》，本项目的提出者是北京交通大学软件学院331研发团队，而开发者是331研发团队，主要用户是面向养老院的管理员， 该软件独立于其他系统，自成一个完整的系统，应用方便。

### **2.2 需求概述**

下面就对智能养老系统分模块进行需求分析。

#### 2.2.1 前端

|     功能     | 详细描述                                                     |
| :----------: | :----------------------------------------------------------- |
|     注册     | 管理员可以注册账号并初次设置个人信息                         |
|     登录     | 管理员可以登录已有账号                                       |
| 修改个人信息 | 管理员可以修改个人信息，包括真实姓名、性别、邮箱、电话等     |
| 查看实时监控 | 管理员可以请求访问监控界面，选择监控机位，系统根据权限及机位状态显示监控画面 |
|   老人管理   | 管理员可以对老人信息进行增删改查                             |
|   员工管理   | 管理员可以对员工信息进行增删改查                             |
| 查看统计报表 | 管理员可以查看由老人信息所生成的数据报表                     |
| 查看微笑事件 | 系统进行情感分析，将老人开心的画面截图，并插入一条数据至数据库，管理员可以查看老人微笑事件 |
| 查看摔倒事件 | 系统进行摔倒检测，将老人摔倒的画面截图，并插入一条数据至数据库，管理员可以查看老人摔倒事件 |
| 查看入侵事件 | 系统划分监测区域，检测到有陌生人入侵监测区域，会将画面截图并插入一条数据至数据库，管理员可以查看入侵事件 |

#### 2.2.2 后端

| 需求                     | 详细分析                                                     |
| ------------------------ | ------------------------------------------------------------ |
| 收集人脸数据             | 将老人、工作人员和义工的人脸图像收集起来，为训练人脸识别模型准备数据。人脸采集，需要用到人脸检测算法检测画面中是否有脸、有几张脸、和得到脸部坐标。 |
| 陌生人识别和追踪         | 发现有陌生人就报警，并追踪。发现陌生人会将截图保存到硬盘，并实时插入一条数据到数据库。一旦数据库有了新数据，Web端的实时报表会立即呈现。 |
| 摔倒检测                 | 检测是否有人摔倒。一旦检测到有人摔倒，会将截图保存到硬盘，并实时插入一条数据到数据库。一旦数据库有了新数据，Web端的实时报表会立即呈现。 |
| 禁止区域入侵检测         | 检测是否有人入侵禁止区域。一旦检测到有人入侵禁止区域，会将截图保存到硬盘，并实时插入一条数据到数据库。一旦数据库有了新数据，Web端的实时报表会立即呈现。 |
| 义工和老人交互检测       | 判断义工在和哪位老人互动。判断条件为：义工和老人的距离在1米之内；一旦检测到有交互，会将截图保存到硬盘，并实时插入一条数据到数据库。一旦数据库有了新数据，Web端的实时报表会立即呈现。 |
| 情感分析                 | 检测老人是否高兴。一旦老人笑了，会将截图保存到硬盘，并实时插入一条数据到数据库。一旦数据库有了新数据，Web端的实时报表会立即呈现。 |
| 摄像头画面实时显示和录像 | 摄像头采集捕获实时画面。Web端会实时进行视频的播放。          |



## **三、系统功能需求** 

### 3.1 养老系统功能分析

在此部分将从用例图、活动图、时序图、类图从不同视角对用户进行刻画和描述。

#### 3.1.1 用例图

![331养老院](D:/文档接受/wechat/WeChat Files/wxid_n0m0sne0igvj22/FileStorage/MsgAttach/5a9ff33f5656615998645146c816d40e/File/2022-07/软件需求规格说明书.assets/331养老院.png)

用例描述

| <span style="display:inline-block;width:100px">用例名称</span> | 注册                                                         |
| -------- | ------------------------------------------------------------ |
| 简述     | 该用例允许管理员将用户名，密码，电话号码三段信息提交至系统注册账号 |
| 参与者   | 管理员                                                       |
| 前置条件 | 打开网页点击注册                                             |
| 正常流   | ①用户输入用户名，密码，电话号码三段信息， ②管理员点击获取验证码，并将其填入到验证码一栏中， ③管理员点击注册按钮，注册成功. |
| 替代流   | ①若管理员未输入用户名，密码，电话号码三段信息，则无法点击获取验证码，并在缺失信息的一栏提示 ②若管理员未点击发送验证码，则无法点击注册按钮，并在验证码一栏提示 ③若管理员输入错误的验证码，点击会提示验证码错误 |
| 后置条件 | 如果用例成功，用户信息在系统的数据库中，否则系统状态不变。   |



| <span style="display:inline-block;width:100px">用例名称</span> | 登录                                                         |
| -------- | ------------------------------------------------------------ |
| 简述     | 该用例允许管理员将用户名，密码，两段信息提交至系统登录账号   |
| 参与者   | 用户                                                         |
| 前置条件 | 打开网页点击登录                                             |
| 正常流   | ①管理员输入用户名，密码三段信息， ②管理员点击登录按钮，登录成功. |
| 替代流   | ①若管理员未输入用户名，密码，则无法点击登录，并在缺失的一栏提示 ②若管理员输入不存在的用户名，点击登录会提示该用户不存在 ③若管理员输入错误的密码，点击登录会提示密码错误 ④若管理员输入密码错误五次则登录失败，一小时内不可再次登录。 |
| 后置条件 | 如果用例成功，系统向管理员展示主界面。                       |



| 用例名称 | 修改个人信息                                                 |
| -------- | ------------------------------------------------------------ |
| 简述     | 该用例给管理员提供修改个人信息的功能                         |
| 参与者   | 管理员                                                       |
| 前置条件 | 管理员进入修改页面，该页面显示管理员的信息，当用户单击“修改”按钮时，该用例启动 |
| 正常流   | ①系统显示管理员需要修改的信息 ②管理员选择要修改的信息，可以进行修改 |
| 替代流   | 若管理员未选择要修改的信息，返回主页面                       |
| 后置条件 | 如果用例成功，管理员修改后的信息会在系统的数据库中更新       |



| <span style="display:inline-block;width:100px">用例名称</span> | 查看实时监控                                                 |
| -------- | ------------------------------------------------------------ |
| 简述     | 该用例允许管理员查看监控端的显示                             |
| 参与者   | 管理员                                                       |
| 前置条件 | 打开网页点击登录，管理员需要进入监控端显示的界面             |
| 正常流   | ①管理员点击选择监控器机位  ②系统显示管理员所选择的监控器所监控的区域视频 |
| 替代流   | ①若管理员未选择监控机位，系统将不会显示监控区域 ②若是用户或家属登录，他们将没有权限查看监控器 |
| 后置条件 | 如果用例成功，系统向管理员展示监控界面。                     |



| <span style="display:inline-block;width:100px">用例名称</span> | 管理人员                                                     |
| -------- | ------------------------------------------------------------ |
| 简述     | 该用例允许管理员对义工，老人等进行人员管理                   |
| 参与者   | 管理员                                                       |
| 前置条件 | 打开网页点击登录，管理员需要进入管理人员的界面，并且选择要义工、老人等 |
| 正常流   | ①管理员点击选择管理人员  ②系统显示老人、义工等个人信息       |
| 替代流   | ①若管理员未选择具体义工或老人，系统将不会显示他们的个人信息  |
| 后置条件 | 如果用例成功，系统向管理员展示对老人或义工的添加，修改，删除等功能。 |



| 用例名称 | 查看统计信息                                                 |
| -------- | ------------------------------------------------------------ |
| 简述     | 该用例允许管理员查看系统对老人摔倒，老人笑脸等统计信息       |
| 参与者   | 管理员                                                       |
| 前置条件 | 打开网页点击登录，管理员需要进入统计信息的界面               |
| 正常流   | ①管理员点击选择统计信息界面  ②管理员选择老人摔倒或老人笑脸的选项 |
| 替代流   | ①若管理员未选择统计信息界面中的老人摔倒或老人笑脸的选项，系统将不会显示统计的信息 |
| 后置条件 | 如果用例成功，系统向管理员展示统计好的信息。                 |



| 用例名称 | 摄像头画面实时显示和录像                            |
| -------- | --------------------------------------------------- |
| 简述     | 摄像头采集捕获实时画面。Web端会实时进行视频的播放。 |
| 参与者   | 管理员。                                            |
| 前置条件 | 管理员打开监控，开启摄像头服务。                    |
| 正常流   | 摄像头被开启，采集捕获实时画面，Web端实时显示。     |
| 替代流   | 摄像头画面捕获失败。                                |
| 后置条件 | 一切操作成功之后，可以实时查看监控的视频。          |



| 用例名称 | 情感分析                                             |
| -------- | ---------------------------------------------------- |
| 简述     | 检测老人是否高兴（微笑）。                           |
| 参与者   | 管理员。                                             |
| 前置条件 | 摄像头处于采集实时画面状态。                         |
| 正常流   | 摄像头在实时画面中通过分析老人面部数据分析老人情感。 |
| 替代流   | 摄像头在实时画面中未能捕获人脸数据。                 |
| 后置条件 | 老人如果笑了，保存截图至硬盘，向数据库插入数据。     |



| 用例名称 | 义工和老人交互检测                                       |
| -------- | -------------------------------------------------------- |
| 简述     | 检测老人在和哪位义工互动。                               |
| 参与者   | 管理员。                                                 |
| 前置条件 | 摄像头处于采集实时画面状态。                             |
| 正常流   | 摄像头在实时画面中检测到义工和老人距离在 1 米内。        |
| 替代流   | 摄像头在实时画面中未能检测到义工和老人互动。             |
| 后置条件 | 检测到义工和老人互动，保存截图至硬盘，向数据库插入数据。 |



| 用例名称 | 禁止区域入侵检测                                   |
| -------- | -------------------------------------------------- |
| 简述     | 摄像头检测是否有人入侵禁止区域。                   |
| 参与者   | 管理员。                                           |
| 前置条件 | 摄像头处于采集实时画面状态。                       |
| 正常流   | 摄像头在实时画面中检测到外人入侵。                 |
| 替代流   | 摄像头在实时画面中未能检测到外人入侵。             |
| 后置条件 | 检测到有人闯入，保存截图至硬盘，向数据库插入数据。 |



| 用例名称 | 摔倒检测                                           |
| -------- | -------------------------------------------------- |
| 简述     | 摄像头进行监控，进行老人摔倒检测。                 |
| 参与者   | 管理员。                                           |
| 前置条件 | 摄像头处于采集实时画面状态。                       |
| 正常流   | 摄像头在实时画面中检测老人是否摔倒。               |
| 替代流   | 摄像头在实时画面中未能检测到老人。                 |
| 后置条件 | 检测到老人摔倒，保存截图至硬盘，向数据库插入数据。 |



| 用例名称 | 陌生人识别和追踪                                             |
| -------- | ------------------------------------------------------------ |
| 简述     | 摄像头分析人脸数据，进行陌生人检测。                         |
| 参与者   | 管理员。                                                     |
| 前置条件 | 摄像头处于采集实时画面状态。                                 |
| 正常流   | 摄像头在实时画面中检测陌生人存在并追踪。                     |
| 替代流   | 摄像头在实时画面中未能检测陌生人存在。                       |
| 后置条件 | 操作成功后，发现有陌生人报警并追踪，保存截图至硬盘，向数据库插入数据。 |



| 用例名称 | 收集人脸数据                                                 |
| -------- | ------------------------------------------------------------ |
| 简述     | 用人脸检测算法检测收集人脸数据，为训练人脸识别模型准备数据。 |
| 参与者   | 管理员。                                                     |
| 前置条件 | 摄像头处于采集人脸状态。                                     |
| 正常流   | 摄像头在画面中捕获人脸数据。                                 |
| 替代流   | 摄像头在画面中未能捕获人脸数据。                             |
| 后置条件 | 操作成功后，摄像头展示人脸的轮廓以及相关信息。               |



#### 3.1.2 活动图

登录活动图中简单描述了，从开始到登录有账号则直接登录结束，没有账号则填写相关信息来注册账号最后回到登录账号再结束。 

![1656988630141](D:/文档接受/wechat/WeChat Files/wxid_n0m0sne0igvj22/FileStorage/MsgAttach/5a9ff33f5656615998645146c816d40e/File/2022-07/软件需求规格说明书.assets/1656988630141.png)

查看实时监控活动图描述了管理员请求访问监控界面，选择监控机位，系统根据权限及机位状态显示监控画面的过程

![1656988649210](D:/文档接受/wechat/WeChat Files/wxid_n0m0sne0igvj22/FileStorage/MsgAttach/5a9ff33f5656615998645146c816d40e/File/2022-07/软件需求规格说明书.assets/1656988649210.png)

收集人脸活动图描述了管理员点击添加老人后，录入老人信息，系统对老人进行人脸采集，采集成功后录入系统数据库。

![1656988809722](D:/文档接受/wechat/WeChat Files/wxid_n0m0sne0igvj22/FileStorage/MsgAttach/5a9ff33f5656615998645146c816d40e/File/2022-07/软件需求规格说明书.assets/1656988809722.png)

该活动图描述了管理员点击查看实时事件后，系统数据库提供数据后，管理员可以通过不同方式查看数据（日期、事件类型）。

![1656991371378](D:/文档接受/wechat/WeChat Files/wxid_n0m0sne0igvj22/FileStorage/MsgAttach/5a9ff33f5656615998645146c816d40e/File/2022-07/软件需求规格说明书.assets/1656991371378.png)

##  四、软硬件及外部系统接口需求

### **4.1 用户界面**

​	用户界面是程序中用户能看见并与之交互作用的部分,设计一个好的用户界面是非常重要的,本设计将为用户提供美观,大方,直观,操作简单的用户界面。

### **4.2 硬件需求**

​	移动终端硬件配置应遵循如下原则：具有高的可靠性，可用性和安全性。【描述系统中软件和硬件每一接口的特征。这种描述可能包括支持的硬件类型、软硬件之间的交流的数据和控制信息的性质以及使用的通信协议。】

### **4.3 运行环境**

- **Web 浏览器：**0+、Chrome、Opera、Safari、Firefox及任何支持HTML5标准的浏览器。
- **标准分辨率：**1024*768、1920*1080、2K



## 五、系统非功能性需求分析

### 5.1 性能 

​		**时延：** 智慧管理系统的时延主要体现在摄像头将视频流推送至媒体服务器以及管理 员对该系统的监控上。管理员向系统发送操作请求以及系统响应管理员的请求，这个时间应该在管理员可接受的范围之内，一般正常人的反应时间为 0.2s,而用户打开一个网页耐心等待时间不超过 5s,超过这个时间，则当前网页极有可能被用户停止访问，因此从摄像头视频流推送至服务器，到管理员访问观看视频流的时延介于 0.2s~5s 之间最为合 适。 

### 5.2 安全性 

- 严格权限访问控制，用户在经过身份认证后，只能访问其权限范围内的数据，只能进行其权限范围内的操作
- 提供运行日志管理及安全审计功能，可追踪系统的历史使用情况
- 能经受来自互联网的一般性恶意攻击。如病毒（包括木马）攻击、口令猜测攻击、黑客入侵等
- 至少 99%的攻击需要在10秒内检测到

### 5.3 可靠性 

- 智慧养老系统要求能在 24 小时内一直稳定运行。当系统处于白天时间，会有大流量的信息涌入，对系统的高并发性和可靠性要求较高，如果只有一台服务器来接受来自很多网络摄像头的请求，一旦资源耗尽，发生宕机的可能性很大，所以系统的可靠性十分重要。
- 本系统发生故障后，系统应重建其性能水平并恢复直接受影响数据的能力；发布新版本时，应要做好回滚方案，以备异常紧急处理，同时做好备份，系统监控的字段以及历史查询信息误删除时可进行恢复。 

### 5.4 易用性 

- 以管理员为中心，结合视觉、交互、情感等综合感受，使产品符合管理员习惯的能力以及其对使用的期望。它会对管理员使用产品的生产效率、错误率以及对新产品的接收程度产生很大的影响，要做到功能入口清晰， 方便操作，操作流程合理。
- 从易用性分析的角度出发，关注功能特性对易用性的特定要求，例如需要给管理员呈现哪些信息，呈现信息的要求，提供哪些操作功能等，同时做好UI的需要架构设计。

### 5.5 可维护性与可扩展性 

- 封装软件应用系统中的各个核心功能模块

- 隔离软件应用系统的核心和外围功能模块

- 软件应用系统中的各个功能模块的职责应该单一

  